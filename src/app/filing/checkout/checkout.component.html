
<ng-container *ngIf="state == 'company' && company != null">

  <h1>Company</h1>
  <div>Company: {{company.company_name}}</div>
  <div>Company: {{company.company_number}}</div>

  <div>
    <form [formGroup]="form">
      <div>
	VAT:
	<mat-button-toggle-group aria-label="VAT"
				 (change)="doit()" formControlName="vat">
	  <mat-button-toggle [value]="0">none</mat-button-toggle>
	  <mat-button-toggle [value]="6">6 months</mat-button-toggle>
	  <mat-button-toggle [value]="12">1 year</mat-button-toggle>
	  <mat-button-toggle [value]="24">2 years</mat-button-toggle>
	</mat-button-toggle-group>
      </div>
      <div>
	Corptax:
	<mat-button-toggle-group aria-label="Corptax"
				 (change)="doit()" formControlName="corptax">
	  <mat-button-toggle [value]="0">none</mat-button-toggle>
	  <mat-button-toggle [value]="6">6 months</mat-button-toggle>
	  <mat-button-toggle [value]="12">1 year</mat-button-toggle>
	  <mat-button-toggle [value]="24">2 years</mat-button-toggle>
	</mat-button-toggle-group>
      </div>
      <div>
	Accounts:
	<mat-button-toggle-group aria-label="Accounts"
				 (change)="doit()" formControlName="accounts">
	  <mat-button-toggle [value]="0">none</mat-button-toggle>
	  <mat-button-toggle [value]="6">6 months</mat-button-toggle>
	  <mat-button-toggle [value]="12">1 year</mat-button-toggle>
	  <mat-button-toggle [value]="24">2 years</mat-button-toggle>
	</mat-button-toggle-group>
      </div>
    </form>
  </div>

  <div>
    <div>
      <div class="timelinelabel">VAT</div>
      <div class="timeline">
      <div *ngFor="let month of months()"
	    class="period {{month < form.value.vat ? 'on' : 'off'}}">
	&nbsp;
      </div>
      </div>
    </div>
    <div>
      <div class="timelinelabel">Corptax</div>
      <div class="timeline">
      <div *ngFor="let month of months()"
	    class="period {{month < form.value.corptax ? 'on' : 'off'}}">
	&nbsp;
      </div>
      </div>
    </div>
    <div>
      <div class="timelinelabel">Accounts</div>
      <div class="timeline">
      <div *ngFor="let month of months()"
	    class="period {{month < form.value.accounts ? 'on' : 'off'}}">
	&nbsp;
      </div>
      </div>
    </div>
  </div>

<!--
  <div *ngFor="let option of options">
    <mat-card>
      <mat-card-title>{{option.kind | uppercase}}</mat-card-title>
      <div>Valid from: {{option.opened | date}}</div>
      <div>Valid to: {{option.expires | date}}</div>
      <div>Covers:
	<span *ngFor="let p of option.provides">{{p}}, </span>
      </div>
      <button mat-button (click)="select_subscription(option)">
	Choose
      </button>
    </mat-card>
  </div>
-->

</ng-container>

<ng-container
  *ngIf="state == 'subscription' && company != null && selected_subscription != null">
  <h1>Subscription</h1>
  <div>Company: {{company.company_name}}</div>
  <div>Company: {{company.company_number}}</div>
  <div>Valid from: {{selected_subscription.opened | date}}</div>
  <div>Valid to: {{selected_subscription.expires | date}}</div>
  <div>Covers:
    <span *ngFor="let p of selected_subscription.provides">{{p}}, </span>
  </div>
  <button mat-button (click)="checkout()">
    Add to basket
  </button>
  <button mat-button (click)="checkout()">
    Checkout
  </button>
  <button mat-button (click)="back()">
    Back
  </button>
</ng-container>
