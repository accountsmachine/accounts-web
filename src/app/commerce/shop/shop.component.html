<section class="tab-contents">

  <mat-drawer-container class="drawer-container">

    <mat-drawer mode="side" class="drawer-side" opened>
      <navigator></navigator>
    </mat-drawer>
    
    <mat-drawer-content class="main-content">

      <section>

	<h1>Purchase more credits</h1>

	<p>Select credits below to see price, and purchase:</p>

	<ul>

	  <li><b>VAT credit</b>: This covers the cost of submitting a
	    single VAT return.  For businesses submitting quarterly, 4
	    credits will cover filing for one year.</li>
	  <li><b>Corporation tax credit</b>: This covers the cost of
	    submitting a single corporation tax return.  Most
	    businesses will need to file one return annually.  New
	    businesses may need to submit two in their first
	    year.</li>
	  <li><b>Accounts filing credit</b>: This covers the cost of
	    submitting a single accounts filing to companies house.
	    Most businesses will file a single set of accounts
	    annually.</li>
	</ul>

	<p>A discount is applied to orders for multiple credits which
	  increases with the order size.</p>

	<h1>Select credits</h1>

	<form [formGroup]="form" *ngIf="offer.offer">

	  <div *ngFor="let kind of kinds" class="selection">
	    <div class="selectlabel">{{offer.offer[kind].description}}:</div>
	    <div class="choice">
	      <mat-button-toggle-group aria-label="VAT credits to purchase"
				       (change)="recalc()"
				       formControlName="{{kind}}">
		<mat-button-toggle *ngFor="let c of offer.offer[kind].offer"
				   [value]="c.quantity">
		  {{c.quantity}}
		</mat-button-toggle>
	      </mat-button-toggle-group>
	    </div>
	    <div class="price">
	      {{(value[kind] / 100) | currency}}
	    </div>
	  </div>

	  <div *ngIf="some_max()">
	    You have the maximum credits for {{full_credits()}}.
	    There are no more credits available to purchase.
	  </div>

	</form>

      </section>

      <section *ngIf="order.total > 0">

	<h1>Your order</h1>

	<order></order>

	<div>
	  <button mat-raised-button color="primary"
		  (click)="place_order()" [disabled]="order_disabled()">
	    <mat-icon>shopping_cart</mat-icon>&nbsp;
	    Place order
	  </button>
	  <button mat-raised-button color="basic" (click)="reset()">
	    <mat-icon>clear</mat-icon>&nbsp;
	    Reset checkout
	  </button>
	</div>

	</section>

      <ng-container *ngIf="elementsOptions?.clientSecret as clientSecret">
	<ngx-stripe-payment [clientSecret]="clientSecret">
	</ngx-stripe-payment>
      </ng-container>

    </mat-drawer-content>

  </mat-drawer-container>

</section>



